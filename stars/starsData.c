#include <stdlib.h>
#include <stdio.h>
#include <string.h>
#include <math.h>
#include <time.h>

#define TWOPI 6.28318530718

float stars[136][3] = {
1012.852261, 501.925666, 3.890000,
998.669485, 322.964530, 2.540000,
973.505953, 109.481036, 4.350000,
906.052417, 662.023734, 3.700000,
912.409805, 258.516676, 3.610000,
904.236283, 249.772216, 3.730000,
893.363083, 209.423874, 4.140000,
867.739200, 485.642486, 3.720000,
854.203033, 645.205863, 4.260000,
861.831508, 363.829364, 4.290000,
831.919368, 483.969056, 3.520000,
854.097465, 64.873428, 3.720000,
853.299218, 60.030177, 4.300000,
851.111764, 61.744432, 3.870000,
820.374125, 511.042294, 4.430000,
849.035074, 67.890882, 4.140000,
808.452485, 655.616581, 4.220000,
845.284572, 66.235296, 2.850000,
839.631565, 67.730495, 3.620000,
800.990404, 398.880657, 4.460000,
780.883511, 521.675988, 2.970000,
792.562874, 218.895279, 3.410000,
779.791690, 294.734027, 3.910000,
787.926525, 100.130768, 4.360000,
743.617846, 437.728234, 4.040000,
732.806198, 445.689609, 4.430000,
744.369393, 260.985568, 4.270000,
736.958400, 183.156088, 3.650000,
729.284219, 160.579639, 3.770000,
726.120896, 102.202716, 4.210000,
722.177125, 156.197993, 4.300000,
723.847820, 95.738095, 4.280000,
717.878038, 183.707331, 4.480000,
711.742144, 179.792922, 3.840000,
714.183968, 141.367399, 3.530000,
711.420599, 180.868374, 3.400000,
687.268369, 245.895794, 4.250000,
691.339218, 173.708138, 0.870000,
675.622547, 392.406387, 3.930000,
682.019606, 219.541848, 4.270000,
662.365346, 512.871468, 3.860000,
651.911564, 575.036525, 4.320000,
678.905957, 96.148409, 4.270000,
650.335089, 389.275598, 4.010000,
645.813388, 279.632192, 3.190000,
645.106751, 258.615924, 4.350000,
641.123602, 294.003052, 3.680000,
628.705507, 411.062483, 4.360000,
630.649493, 327.188213, 3.710000,
632.946168, 207.518633, 4.060000,
618.611253, 334.156332, 4.470000,
582.436523, 598.171054, 3.190000,
589.131215, 403.867609, 2.780000,
583.103357, 442.523412, 4.250000,
572.564591, 475.417064, 4.450000,
567.670678, 523.399174, 3.290000,
569.329752, 486.926092, 4.360000,
580.407679, 319.714250, 4.460000,
569.349412, 435.421831, 0.180000,
562.293294, 420.384990, 3.590000,
552.579323, 488.015567, 4.290000,
545.086689, 429.289624, 4.130000,
547.526087, 372.496561, 3.350000,
551.956464, 281.322606, 1.640000,
566.291618, 23.500647, 1.650000,
524.221721, 572.413551, 2.810000,
536.996052, 284.618486, 4.200000,
529.447059, 349.375314, 2.250000,
542.579749, 146.625883, 4.320000,
514.897576, 537.224098, 2.580000,
529.053975, 246.585246, 4.390000,
528.551554, 241.794866, 3.390000,
516.630245, 407.147360, 2.750000,
517.914443, 357.995196, 1.690000,
523.512334, 248.340351, 4.090000,
530.522822, 115.957700, 2.970000,
510.375251, 372.056327, 3.770000,
505.622241, 364.880994, 1.740000,
480.784353, 589.683580, 3.590000,
480.290980, 500.950965, 3.550000,
482.000081, 444.785960, 2.070000,
464.244747, 569.871196, 3.760000,
486.488329, 122.766727, 4.390000,
474.814409, 264.881236, 0.450000,
456.184983, 492.397432, 3.710000,
457.628577, 239.556974, 4.120000,
463.592001, 84.181043, 4.160000,
447.831707, 182.419160, 4.420000,
435.921923, 187.476690, 4.450000,
413.403489, 404.833177, 3.990000,
434.727014, 89.977736, 3.310000,
383.606726, 533.428350, 1.980000,
413.275170, 86.883470, 2.870000,
397.376641, 288.519574, 4.390000,
375.305594, 411.233309, 3.760000,
395.246730, 112.530022, 4.130000,
354.119778, 600.080610, 4.340000,
374.617681, 256.915794, 4.470000,
344.256046, 549.087943, 3.950000,
368.333299, 154.085056, 1.930000,
341.724991, 536.968464, 4.420000,
358.453332, 43.700356, 3.060000,
348.435932, 188.108324, 4.490000,
322.526567, 519.264156, -1.440000,
344.529882, 191.395746, 3.350000,
329.365258, 306.456474, 4.480000,
290.321038, 613.398312, 3.890000,
300.284883, 465.238060, 4.080000,
290.581614, 524.151230, 4.360000,
272.558462, 680.694470, 1.500000,
264.332927, 666.927952, 3.490000,
264.271307, 610.957503, 3.020000,
269.140701, 507.844305, 4.110000,
296.685364, 90.592908, 4.010000,
245.557592, 647.593471, 1.830000,
256.470874, 333.419002, 4.150000,
227.378971, 649.311587, 4.420000,
225.214666, 655.515291, 4.010000,
250.844379, 132.527111, 3.580000,
214.604424, 631.508442, 4.370000,
249.305035, 61.382851, 3.500000,
215.175444, 227.520640, 2.890000,
212.398663, 219.495789, 4.330000,
166.406665, 601.134916, 4.440000,
145.340079, 668.727786, 3.800000,
171.961127, 259.081453, 0.400000,
152.865552, 437.469231, 3.940000,
171.374303, 5.666110, 3.570000,
112.876330, 661.822375, 4.400000,
109.522228, 646.389852, 3.340000,
82.828345, 621.884439, 4.200000,
85.038115, 286.279842, 4.390000,
38.377569, 651.590079, 2.830000,
54.792529, 353.374735, 4.360000,
37.525230, 575.922956, 4.400000,
32.716473, 187.990221, 3.530000
};

int main(int argc, char **argv){
	time_t t;
	srand((unsigned) time(&t));

	int width = 1000;
	int height = 700;

	char path[128];
	path[0] = '\0';
	// strcat(path, directory);
	// strcat(path, filename);
	strcat(path, "starsData.svg");
	FILE *file = fopen(path, "w");
	fprintf(file, "<?xml version=\"1.0\" encoding=\"utf-8\"?>\n");
	fprintf(file, "<svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" ");
	fprintf(file, "x=\"0px\" y=\"0px\" width=\"");
	fprintf(file, "%d",width);
	fprintf(file, "px\" height=\"");
	fprintf(file, "%d",height);
	fprintf(file, "px\" viewBox=\"0 0 ");
	fprintf(file, "%d",width);
	fprintf(file, " ");
	fprintf(file, "%d",height);
	fprintf(file, "\" xml:space=\"preserve\">\n");

	fprintf(file, "<g>\n");
	fprintf(file, "<polyline fill=\"none\" stroke=\"#000000\" points=\"");  // hanging open quote

	float x, y;
	for(int i = 0; i < 136; i++){
		x = stars[i][0];
		y = stars[i][1];
		// int SIZE = 2;
		float SIZE = 8.0/(2+stars[i][2]);
		float RADIUS = .1;
		float phase = 0;//rand()%628 / 100.0;
		for(float a = 0; a < phase + SIZE * TWOPI; a += .05){
			float rx = x + (cos(a) * a) * RADIUS;
			float ry = y + (sin(a) * a) * RADIUS;
			fprintf(file, "%.2f,%.2f ", rx, ry);
		}
		fprintf(file, "\"/>\n"); // closing quote
		fprintf(file, "<polyline fill=\"none\" stroke=\"#000000\" points=\"");  // hanging open quote
	}

	fprintf(file, "\"/>\n"); // closing quote

	fprintf(file, "</g>\n");
	fprintf(file, "</svg>");
	fclose(file);
	return 0;
}